# HTTP

http协议：超文本传输协议，可靠传输，无状态

## HTTP报文结构

HTTP 结构，是`header + body`的结构，具体而言:

```
起始行 + 头部 + 空行 + 实体
```

http报文分为 `请求报文`和`响应报文`

### 起始行

对于请求报文来说，起始行类似：

```
GET /home HTTP/1.1
```

对于响应报文，起始行类似：

```
HTTP/1.1 200 OK
```

响应报文的起始行也叫状态行，有**http版本、状态码和原因**三部分组成

### 头部

请求头和响应头

### 空行

用来区分开`头部`和`实体`。

### 实体

请求报文对应`请求体`, 响应报文对应`响应体`

## HTTP的请求方式

- GET: 通常用来获取资源
- HEAD: 获取资源的元信息
- POST: 提交数据，即上传数据
- PUT: 修改数据
- DELETE: 删除资源(几乎用不到)
- CONNECT: 建立连接隧道，用于代理服务器
- OPTIONS: 列出可对资源实行的请求方法，用来跨域请求
- TRACE: 追踪请求-响应的传输路径

### GET和POST区别

- GET在浏览器回退是无影响的，而POST会在提交请求
- GET请求参数会被保留在浏览器历史里，而POST中的参数不会被保留
- GET可被收藏为书签，POST不可以
- GET 请求会被浏览器主动缓存下来，而 POST 默认不会
- GET是幂等的，而POST不是。(幂等表示执行相同的操作，结果也是相同的)
- GET比POST更不安全，因为参数直接暴露在URL上，所以不能用来传递敏感信息。
- GET参数通过URL传递，POST放在Request body中

## HTTP优缺点

### HTTP特点

**「灵活可扩展」**。一个是语法上只规定了基本格式，空格分隔单词，换行分隔字段等。另外一个就是传输形式上不仅可以传输文本，还可以传输图片，视频等任意数据。

**「请求-应答模式」**，通常而言，就是一方发送消息，另外一方要接受消息，或者是做出相应等。

**「可靠传输」**，HTTP是基于TCP/IP，因此把这一特性继承了下来。

**「无状态」**，这个分场景回答即可。

### HTTP缺点

**「无状态」**，有时候，需要保存信息，比如像购物系统，需要保留下顾客信息等等

**「明文传输」**，即协议里的报文(主要指的是头部)不使用二进制数据，而是文本形式。HTTP的报文信息暴露给了外界。

**「队头阻塞」**，当http开启长连接时，共用一个TCP连接，当某个请求时间过长时，其他的请求只能处于阻塞状态，这就是队头阻塞问题。

## 理解URI

URI：统一资源标识符，作用是用来区分互联网上的不同的资源

URI包含URN和URL,URI编码只能用ASCII

## HTTP状态码

状态码：

2xx：成功–表示请求已被成功接收、理解、接受。

3xx：重定向–要完成请求必须进行更进一步的操作。

4xx：客户端错误–请求有语法错误或请求无法实现。

5xx：服务器端错误–服务器未能实现合法的请求。

常见的状态码有:

200请求成功

204成功处理了请求，但没有返回内容

301永久重定向

302临时重定向

400错误请求

404请求不到资源

500服务器内部错误

## HTTP1缺陷

HTTP/1.1 版本默认允许复用TCP连接，但是在同一个TCP连接里，就会造成队头阻塞

在传输数据过程中，所有内容都是明文，客户端和服务器端都无法验证对方的身份，无法保证数据的安全性

## HTTP2改进

二进制分帧

头部压缩

多路复用

服务器推送

## ☆HTTP缓存









